/*Temp Data*/

var items = [
           { "ItemID": "1", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant1.jpg" },
           { "ItemID": "2", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat1.jpg" },
           { "ItemID": "3", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant2.jpg" },
           { "ItemID": "4", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top1.jpg" },
           { "ItemID": "5", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat2.jpg" },
           { "ItemID": "6", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat3.jpg" },
           { "ItemID": "7", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant3.jpg" },
           { "ItemID": "8", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top2.jpg" },
           { "ItemID": "9", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top3.jpg" },
           { "ItemID": "10", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat4.jpg" },
           { "ItemID": "11", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top4.jpg" },
           { "ItemID": "12", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant4.jpg" },
           { "ItemID": "13", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat5.jpg" },
           { "ItemID": "14", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant5.jpg" },
           { "ItemID": "15", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat6.jpg" },
           { "ItemID": "16", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top5.jpg" },
           { "ItemID": "17", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant6.jpg" },
           { "ItemID": "18", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top6.jpg" },
           { "ItemID": "19", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat7.jpg" },
           { "ItemID": "20", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top7.jpg" },
           { "ItemID": "21", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant7.jpg" },
           { "ItemID": "22", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top8.jpg" },
           { "ItemID": "23", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat8.jpg" },
           { "ItemID": "24", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant8.jpg" },
           { "ItemID": "25", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top9.jpg" },
           { "ItemID": "26", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant9.jpg" },
           { "ItemID": "27", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat9.jpg" },
           { "ItemID": "28", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top10.jpg" },
           { "ItemID": "29", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant10.jpg" },
           { "ItemID": "30", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat10.jpg" },
        ];

var itemDetails = [
           { "ItemID": "1", "ItemDetailsID": "1", "Name": "ALFKI", "Type": "Alfreds Futterkiste", "Color": "ALFKI", "Pattren": "ALFKI", "Size": "ALFKI", "Style": "ALFKI", "PartOfOutfit": "ALFKI", "Note": "ALFKI", "Image": "../../Images/Pants/Pant1.jpg" },
           { "ItemID": "2", "ItemDetailsID": "2", "Name": "ALFKI", "Type": "Alfreds Futterkiste", "Color": "ALFKI", "Pattren": "ALFKI", "Size": "ALFKI", "Style": "ALFKI", "PartOfOutfit": "ALFKI", "Note": "ALFKI", "Image": "../../Images/Hats/Hat1.jpg" },
           { "ItemID": "4", "ItemDetailsID": "3", "Name": "ALFKI", "Type": "Alfreds Futterkiste", "Color": "ALFKI", "Pattren": "ALFKI", "Size": "ALFKI", "Style": "ALFKI", "PartOfOutfit": "ALFKI", "Note": "ALFKI", "Image": "../../Images/Tops/Top1.jpg" },
           { "ItemID": "5", "ItemDetailsID": "2", "Name": "ALFKI", "Type": "Alfreds Futterkiste", "Color": "ALFKI", "Pattren": "ALFKI", "Size": "ALFKI", "Style": "ALFKI", "PartOfOutfit": "ALFKI", "Note": "ALFKI", "Image": "../../Images/Hats/Hat2.jpg" },
           { "ItemID": "6", "ItemDetailsID": "2", "Name": "ALFKI", "Type": "Alfreds Futterkiste", "Color": "ALFKI", "Pattren": "ALFKI", "Size": "ALFKI", "Style": "ALFKI", "PartOfOutfit": "ALFKI", "Note": "ALFKI", "Image": "../../Images/Hats/Hat3.jpg" },
          ];

var typeData = [
  { id: 1, Type: 'Top' },
  { id: 2, Type: 'Pant' },
  { id: 3, Type: 'Shoe' }
];

var colorData = [
  { id: 1, Color: 'Red' },
  { id: 2, Color: 'White' },
  { id: 3, Color: 'Black' }
];

var pattrenData = [
  { id: 1, Pattren: 'Plain' },
  { id: 2, Pattren: 'Doted' }
];

var styleData = [
  { id: 1, Style: 'Casual' }
];

var sizeData = [
  { id: 1, Size: 'S' },
  { id: 2, Size: 'L' },
  { id: 3, Size: 'M' }
];

var categoryData = [
  { id: 1, Category: 'tops' },
  { id: 2, Category: 'hats' },
  { id: 3, Category: 'pants' }
];

var myApp = angular.module('myApp', []);
myApp.controller('ctrlTypes', function ($scope) {
    $scope.categoris = categoryData;
    $scope.types = typeData;
    $scope.colors = colorData;
    $scope.pattrens = pattrenData;
    $scope.styles = styleData;
    $scope.sizes = sizeData;

});

myApp.controller('MasterDetailCtrl', function ($scope) {
    //  We'll load our list of Customers from our JSON Web Service into this variable
    $scope.selectedCategory = null;

    //  We'll load our list of Customers from our JSON Web Service into this variable
    $scope.Tops = null;
    $scope.Hats = null;
    $scope.Pants = null;

    $scope.Items = items;
    $scope.ItemDetails = itemDetails;
    $scope.item = null;
    $scope.OutfitItemHat = null; //[{ "ItemID": "2", "ItemName": "Alfreds Futterkiste", "Category": "hats", "Image": "../../Images/Hats/Hat1.jpg" }];
    $scope.OutfitItemTop = null; //[{ "ItemID": "4", "ItemName": "Alfreds Futterkiste", "Category": "tops", "Image": "../../Images/Tops/Top1.jpg"}];
    $scope.OutfitItemPant = null; //[{ "ItemID": "1", "ItemName": "Alfreds Futterkiste", "Category": "pants", "Image": "../../Images/Pants/Pant1.jpg" }];

    $scope.removeItem = function (item) {
        if (confirm('Are sure do you want to delete ?')) {
            if (item.Category == 'hats') {
                var index = $scope.Hats.indexOf(item);
                $scope.Hats.splice(index, 1);
            }
            if (item.Category == 'tops') {
                var index = $scope.Tops.indexOf(item);
                $scope.Tops.splice(index, 1);
            }
            if (item.Category == 'pants') {
                var index = $scope.Pants.indexOf(item);
                $scope.Pants.splice(index, 1);
            }
        }
    }

    $scope.selectItem = function (item) {
        $scope.loadItemDetails(item.ItemID);
    }

    $scope.selectOutfitItem = function (item) {
        var filteredDetails = $scope.find_in_object(JSON.parse(JSON.stringify($scope.Items)), { ItemID: item.ItemID });
        if (item.Category == 'hats') {
            //$scope.OutfitItemHat.push(filteredDetails[0]);
            $scope.OutfitItemHat = filteredDetails[0];
            $("#btnNext").removeClass('hidden');
            $("#btnPrevious").removeClass('hidden');
        }
        if (item.Category == 'tops') {
            $scope.OutfitItemTop = filteredDetails[0];
            $("#btnNext").removeClass('hidden');
            $("#btnPrevious").removeClass('hidden');
        }
        if (item.Category == 'pants') {
            $scope.OutfitItemPant = filteredDetails[0];
            $("#btnNext").removeClass('hidden');
            $("#btnPrevious").removeClass('hidden');
        }
    }

    $scope.selectCategory = function (val) {
        $scope.loadItems(val);
    }
    $scope.loadItems = function (val) {
        var filteredItems = $scope.find_in_object(JSON.parse(JSON.stringify($scope.Items)), { Category: val });
        if (val == 'hats') {
            $scope.Hats = filteredItems;
        }
        if (val == 'tops') {
            $scope.Tops = filteredItems;
        }
        if (val == 'pants') {
            $scope.Pants = filteredItems;
        }
    }


    $scope.loadItemDetails = function (itemId) {
        var filteredItemDetails = $scope.find_in_object(JSON.parse(JSON.stringify($scope.ItemDetails)), { ItemID: itemId });
        if (filteredItemDetails.length <= 0) {
            BootstrapDialog.show({
                title: 'Information',
                message: 'Details not found.',
                buttons: [{
                    label: 'Ok',
                    action: function (dialogItself) {
                        dialogItself.close();
                    }

                }]
            });
        }
        else {
            $scope.item = filteredItemDetails[0];
            readonlyEnable();
            $('#divItemDetails').modal('show');
        }
    }

    $scope.addItem = function (item) {
        if ($(".nav-tabs > li.active > a").attr("id") == 'hats') {
            $scope.Items.push({ "ItemID": $scope.Items.length + 1, "ItemName": item.Name, "Category": item.Category, "Image": "../../Images/Hats/" + item.Image });
            $scope.Hats.push({ "ItemID": $scope.Items.length + 1, "ItemName": item.Name, "Category": item.Category, "Image": "../../Images/Hats/" + item.Image });
            $scope.ItemDetails.push({ "ItemID": $scope.Items.length, "ItemDetailsID": $scope.ItemDetails.length + 1, "Name": item.Name, "Type": item.Type, "Color": item.Color, "Pattren": item.Pattren, "Size": item.Size, "Style": item.Style, "PartOfOutfit": "", "Note": item.Note, "Image": "../../Images/Hats/" + item.Image });
            $scope.loadItems(item.Category);
        }
        if ($(".nav-tabs > li.active > a").attr("id") == 'tops') {
            $scope.Tops.push({ "ItemID": $scope.Items.length + 1, "ItemName": item.Name, "Category": item.Category, "Image": "../../Images/Tops/" + item.Image });
            $scope.Items.push({ "ItemID": $scope.Items.length + 1, "ItemName": item.Name, "Category": item.Category, "Image": "../../Images/Tops/" + item.Image });
            $scope.ItemDetails.push({ "ItemID": $scope.Items.length, "ItemDetailsID": $scope.ItemDetails.length + 1, "Name": item.Name, "Type": item.Type, "Color": item.Color, "Pattren": item.Pattren, "Size": item.Size, "Style": item.Style, "PartOfOutfit": "", "Note": item.Note, "Image": "../../Images/Tops/" + item.Image });
            $scope.loadItems(item.Category);
        }
        if ($(".nav-tabs > li.active > a").attr("id") == 'pants') {
            $scope.Pants.push({ "ItemID": $scope.Items.length + 1, "ItemName": item.Name, "Category": item.Category, "Image": "../../Images/Pants/" + item.Image });
            $scope.Items.push({ "ItemID": $scope.Items.length + 1, "ItemName": item.Name, "Category": item.Category, "Image": "../../Images/Pants/" + item.Image });
            $scope.ItemDetails.push({ "ItemID": $scope.Items.length, "ItemDetailsID": $scope.ItemDetails.length + 1, "Name": item.Name, "Type": item.Type, "Color": item.Color, "Pattren": item.Pattren, "Size": item.Size, "Style": item.Style, "PartOfOutfit": "", "Note": item.Note, "Image": "../../Images/Pants/" + item.Image });
            $scope.loadItems(item.Category);
        }
    }

    $scope.find_in_object = function (my_object, my_criteria) {
        return my_object.filter(function (obj) {
            return Object.keys(my_criteria).every(function (c) {
                return obj[c] == my_criteria[c];
            });
        });
    }
});

myApp.directive('ngConfirmClick', [
        function () {
            return {
                link: function (scope, element, attr) {
                    var msg = attr.ngConfirmClick || "Are you sure?";
                    var clickAction = attr.ngClick;
                    element.bind('click', function (event) {
                        if (window.confirm(msg)) {
                            scope.$eval(clickAction)
                        }
                    });
                }
            };
        } ])


function readonlyDisable() {
    $(".textAns").removeClass('hidden');
    $(".lblAns").addClass('hidden');
    $("#btnSave").removeClass('hidden');
    $("#btnCancel").removeClass('hidden');
    $("#btnEdit").addClass('hidden');
}

function readonlyEnable() {
    $(".textAns").addClass('hidden');
    $(".lblAns").removeClass('hidden');

    $("#btnSave").addClass('hidden');
    $("#btnCancel").addClass('hidden');
    $("#btnEdit").removeClass('hidden');
}

function UpdateItem() {
    BootstrapDialog.show({
        title: 'Success',
        message: 'Item Details Updated Successfully.',
        buttons: [{
            label: 'Ok',
            action: function (dialogItself) {
                $(".textAns").addClass('hidden');
                $(".lblAns").removeClass('hidden');
                $("#btnSave").addClass('hidden');
                $("#btnCancel").addClass('hidden');
                $("#btnEdit").removeClass('hidden');
                dialogItself.close();
            }

        }]
    });
}


